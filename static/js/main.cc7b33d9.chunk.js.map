{"version":3,"sources":["components/Assign/AssignSlice.js","components/Assign/Assign.js","components/MergeAnnotations/MergeAnnotations.js","firebase/firebase.js","firebase/firebaseSlice.js","components/Profile/Profile.js","components/AssignUsers.js","components/SignIn/SignIn.js","components/SignUp/SignUp.js","components/PrepareDocument/PrepareDocument.js","components/Preparation.js","components/SignDocument/SignDocumentSlice.js","components/SignDocument/SignDocument.js","components/Sign.js","components/ViewDocument/ViewDocumentSlice.js","components/ViewDocument/ViewDocument.js","components/View.js","components/Header.js","components/PasswordReset/PasswordReset.js","components/Lists/SignList.js","components/Lists/SignedList.js","components/Welcome.js","App.js","app/store.js","index.js"],"names":["AssignSlice","createSlice","name","initialState","signees","reducers","addSignee","state","action","key","payload","email","resetSignee","console","log","actions","selectAssignees","assign","Assign","useState","setEmail","displayName","setDisplayName","showToast","setShowToast","assignees","useSelector","dispatch","useDispatch","padding","size","id","onChange","event","value","placeholder","label","type","onClick","Date","getTime","addUser","text","color","inline","Header","Row","HeaderCell","weight","Body","map","user","Cell","length","navigate","setTimeout","fit","dangerouslySetInlineStyle","__style","bottom","left","transform","paddingX","position","mergeAnnotations","docRef","xfdf","PDFNet","window","CoreControls","setWorkerPath","storageRef","storage","ref","child","getDownloadURL","URL","main","PDFDoc","createFromURL","doc","initSecurityHandler","i","FDFDoc","createFromXFDF","fdfDoc","fdfMerge","flattenAnnotations","saveMemoryBuffer","SDFDoc","SaveOptions","e_linearized","docbuf","blob","Blob","put","then","snapshot","runWithCleanup","firebase","initializeApp","apiKey","process","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","auth","firestore","provider","GoogleAuthProvider","signInWithGoogle","signInWithPopup","generateUserDocument","additionalData","userRef","uid","get","exists","photoURL","set","error","getUserDocument","userDocument","data","addDocumentToSign","emails","signedBy","requestedTime","collection","add","signed","signedTime","catch","updateDocumentToSign","docId","xfdfSigned","documentRef","includes","signedByArray","xfdfArray","update","time","searchForDocumentToSign","documentsRef","query","where","querySigned","docIds","docIdSigned","querySnapshot","forEach","push","searchForDocumentsSigned","firebaseSlice","docs","docsSigned","setUser","selectUser","ProfilePage","display","direction","paddingY","span","to","className","src","signOut","accessibilityLabel","AssignUsers","SignIn","password","setPassword","setError","signInWithEmailAndPassword","signInWithEmailAndPasswordHandler","SignUp","createUserWithEmailAndPasswordHandler","createUserWithEmailAndPassword","PrepareDocument","instance","setInstance","dropPoint","setDropPoint","assigneesValues","initialAssignee","assignee","setAssignee","viewer","useRef","filePicker","useEffect","WebViewer","path","disabledElements","current","iframeWindow","setToolbarGroup","iframeDoc","document","body","addEventListener","dragOver","e","drop","onchange","file","target","files","loadDocument","applyFields","Annotations","docViewer","annotManager","getAnnotationManager","fieldManager","getFieldManager","annotationsList","getAnnotationsList","annotsToDelete","annotsToDraw","Promise","all","annot","index","custom","field","Forms","Field","getContents","now","inputAnnot","TextWidgetAnnotation","SignatureWidgetAnnotation","appearance","appearances","_DEFAULT","Normal","offset","x","y","F","javascript","K","DatePickerWidgetAnnotation","deleteAnnotation","PageNumber","getPageNumber","X","getX","Y","getY","rotation","Rotation","Width","getWidth","Height","getHeight","WidgetAnnotation","getCustomStyles","widget","border","addAnnotation","addField","deleteAnnotations","drawAnnotationsFromList","uploadForSigning","point","flag","getDocument","displayMode","getDisplayModeManager","getDisplayMode","page","getSelectedPages","first","page_idx","getCurrentPage","page_info","getPageInfo","page_point","windowToPage","zoom","getZoom","textAnnot","FreeTextAnnotation","getCompleteRotation","width","height","setPadding","Rect","setContents","FontSize","FillColor","Color","TextColor","StrokeThickness","StrokeColor","TextAlign","Author","getCurrentUser","deselectAllAnnotations","redrawAnnotation","selectAnnotation","referenceString","exportAnnotations","widgets","fields","xfdfString","getFileData","arr","Uint8Array","preventDefault","scrollElement","getScrollViewElement","scrollLeft","scrollTop","pageX","pageY","dragStart","style","opacity","copy","cloneNode","appendChild","dataTransfer","setDragImage","setData","dragEnd","removeChild","getElementById","flex","gap","click","iconEnd","options","draggable","onDragStart","onDragEnd","Preparation","SignDocumentSlice","docToSign","setDocToSign","resetDocToSign","selectDocToSign","signDoc","SignDocument","setAnnotatManager","annotPosition","setAnnotPosition","normalStyles","on","annotations","imported","fieldName","startsWith","Hidden","Listable","completeSigning","links","annots","jumpToAnnotation","Sign","ViewDocumentSlice","docToView","setDocToView","resetDocToView","selectDocToView","viewDoc","ViewDocument","doneViewing","downloadPdf","View","PasswordReset","emailHasBeenSent","setEmailHasBeenSent","sendPasswordResetEmail","SignList","setDocs","show","setShow","docsToSign","seconds","toDateString","SignedList","docsToView","App","onAuthStateChanged","userAuth","Welcome","configureStore","reducer","firebaseReducer","AssignReducer","SignDocumentReducer","ViewDocumentReducer","ReactDOM","render","StrictMode","store"],"mappings":"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","file":"static/js/main.cc7b33d9.chunk.js","sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\n\nexport const AssignSlice = createSlice({\n  name: 'assign',\n  initialState: {\n    signees: [],\n  },\n  reducers: {\n    addSignee: (state, action) => {\n      state.signees = [...state.signees, { key: action.payload.key, name: action.payload.name, email: action.payload.email } ];\n    },\n    resetSignee: (state, action) => {\n      console.log('resetSignee');\n      state.signees = [];\n    }\n  },\n});\n\nexport const { addSignee, resetSignee } = AssignSlice.actions;\n\nexport const selectAssignees = state => state.assign.signees;\n\nexport default AssignSlice.reducer;\n","import React, { useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { navigate } from '@reach/router';\nimport {\n  Box,\n  Button,\n  Container,\n  Heading,\n  TextField,\n  Table,\n  Text,\n  Toast,\n} from 'gestalt';\nimport 'gestalt/dist/gestalt.css';\nimport { addSignee, selectAssignees } from './AssignSlice';\n\nconst Assign = () => {\n  const [email, setEmail] = useState('');\n  const [displayName, setDisplayName] = useState('');\n  const [showToast, setShowToast] = useState(false);\n  const assignees = useSelector(selectAssignees);\n  const dispatch = useDispatch();\n\n  const prepare = () => {\n    if (assignees.length > 0) {\n      navigate(`/prepareDocument`);\n    } else {\n      setShowToast(true);\n      setTimeout(() => setShowToast(false), 1000);\n    }\n  };\n\n  const addUser = (name, email) => {\n    const key = `${new Date().getTime()}${email}`;\n    if (name !== '' && email !== '') {\n      dispatch(addSignee({ key, name, email }));\n      setEmail('');\n      setDisplayName('');\n    }\n  };\n\n  return (\n    <div>\n      <Box padding={3}>\n        <Container>\n          <Box padding={3}>\n            <Heading size=\"md\">Who needs to sign?</Heading>\n          </Box>\n          <Box padding={2}>\n            <TextField\n              id=\"displayName\"\n              onChange={event => setDisplayName(event.value)}\n              placeholder=\"Enter recipient's name\"\n              label=\"Name\"\n              value={displayName}\n              type=\"text\"\n            />\n          </Box>\n          <Box padding={2}>\n            <TextField\n              id=\"email\"\n              onChange={event => setEmail(event.value)}\n              placeholder=\"Enter recipient's email\"\n              label=\"Email\"\n              value={email}\n              type=\"email\"\n            />\n          </Box>\n          <Box padding={2}>\n            <Button\n              onClick={event => {\n                addUser(displayName, email);\n              }}\n              text=\"Add user\"\n              color=\"blue\"\n              inline\n            />\n          </Box>\n          <Box padding={2}>\n            <Table>\n              <Table.Header>\n                <Table.Row>\n                  <Table.HeaderCell>\n                    <Text weight=\"bold\">Name</Text>\n                  </Table.HeaderCell>\n                  <Table.HeaderCell>\n                    <Text weight=\"bold\">Email</Text>\n                  </Table.HeaderCell>\n                </Table.Row>\n              </Table.Header>\n              <Table.Body>\n                {assignees.map(user => (\n                  <Table.Row key={user.key}>\n                    <Table.Cell>\n                      <Text>{user.name}</Text>\n                    </Table.Cell>\n                    <Table.Cell>\n                      <Text>{user.email}</Text>\n                    </Table.Cell>\n                  </Table.Row>\n                ))}\n              </Table.Body>\n            </Table>\n          </Box>\n          <Box padding={2}>\n            <Button onClick={prepare} text=\"Continue\" color=\"blue\" inline />\n          </Box>\n          <Box\n            fit\n            dangerouslySetInlineStyle={{\n              __style: {\n                bottom: 50,\n                left: '50%',\n                transform: 'translateX(-50%)',\n              },\n            }}\n            paddingX={1}\n            position=\"fixed\"\n          >\n            {showToast && (\n              <Toast color=\"red\" text={<>Please add at least one user</>} />\n            )}\n          </Box>\n        </Container>\n      </Box>\n    </div>\n  );\n};\n\nexport default Assign;\n","import { storage } from '../../firebase/firebase';\n\nexport const mergeAnnotations = async (docRef, xfdf) => {\n  const PDFNet = window.PDFNet;\n  const CoreControls = window.CoreControls;\n  CoreControls.setWorkerPath('webviewer/core');\n\n  const storageRef = storage.ref();\n  const URL = await storageRef.child(docRef).getDownloadURL();\n  \n  const main = async () => {\n    const doc = await PDFNet.PDFDoc.createFromURL(URL);\n    doc.initSecurityHandler();\n\n    let i;\n    for (i=0; i < xfdf.length; i++) {\n        console.log(xfdf[i]);\n        let fdfDoc = await PDFNet.FDFDoc.createFromXFDF(xfdf[i]);\n        await doc.fdfMerge(fdfDoc);\n        await doc.flattenAnnotations();\n    }\n  \n    const docbuf = await doc.saveMemoryBuffer(\n      PDFNet.SDFDoc.SaveOptions.e_linearized,\n    );\n    const blob = new Blob([docbuf], {\n      type: 'application/pdf',\n    });\n  \n    const documentRef = storageRef.child(docRef);\n  \n    documentRef.put(blob).then(function (snapshot) {\n      console.log('Uploaded the blob');\n    });\n  }\n\n  await PDFNet.runWithCleanup(main);\n};\n","import firebase from 'firebase/app';\nimport 'firebase/auth';\nimport 'firebase/firestore';\nimport 'firebase/storage';\n\nimport { mergeAnnotations } from '../components/MergeAnnotations/MergeAnnotations';\n\nconst firebaseConfig = {\n  apiKey: process.env.REACT_APP_API_KEY,\n  authDomain: process.env.REACT_APP_AUTH_DOMAIN,\n  databaseURL: process.env.REACT_APP_DATABASE_URL,\n  projectId: process.env.REACT_APP_PROJECT_ID,\n  storageBucket: process.env.REACT_APP_STORAGE_BUCKET,\n  messagingSenderId: process.env.REACT_APP_MESSAGING_SENDER_ID,\n  appId: process.env.REACT_APP_APP_ID,\n};\n// Initialize Firebase\nfirebase.initializeApp(firebaseConfig);\n\nexport const auth = firebase.auth();\nexport const firestore = firebase.firestore();\nexport const storage = firebase.storage();\n\nconst provider = new firebase.auth.GoogleAuthProvider();\n\nexport const signInWithGoogle = () => {\n  auth.signInWithPopup(provider);\n};\n\nexport const generateUserDocument = async (user, additionalData) => {\n  if (!user) return;\n  const userRef = firestore.doc(`users/${user.uid}`);\n  const snapshot = await userRef.get();\n  if (!snapshot.exists) {\n    const { email, displayName, photoURL } = user;\n    try {\n      await userRef.set({\n        displayName,\n        email,\n        photoURL,\n        ...additionalData,\n      });\n    } catch (error) {\n      console.error('Error creating user document', error);\n    }\n  }\n  return getUserDocument(user.uid);\n};\n\nconst getUserDocument = async uid => {\n  if (!uid) return null;\n  try {\n    const userDocument = await firestore.doc(`users/${uid}`).get();\n    return {\n      uid,\n      ...userDocument.data(),\n    };\n  } catch (error) {\n    console.error('Error fetching user', error);\n  }\n};\n\nexport const addDocumentToSign = async (uid, email, docRef, emails) => {\n  if (!uid) return;\n  const signed = false;\n  const xfdf = [];\n  const signedBy = [];\n  const requestedTime = new Date();\n  const signedTime = '';\n  firestore\n    .collection('documentsToSign')\n    .add({\n      uid,\n      email,\n      docRef,\n      emails,\n      xfdf,\n      signedBy,\n      signed,\n      requestedTime,\n      signedTime,\n    })\n    .then(function (docRef) {\n      console.log('Document written with ID: ', docRef.id);\n    })\n    .catch(function (error) {\n      console.error('Error adding document: ', error);\n    });\n};\n\nexport const updateDocumentToSign = async (docId, email, xfdfSigned) => {\n  const documentRef = firestore.collection('documentsToSign').doc(docId);\n  documentRef\n    .get()\n    .then(async doc => {\n      if (doc.exists) {\n        const { signedBy, emails, xfdf, docRef } = doc.data();\n        if (!signedBy.includes(email)) {\n          const signedByArray = [...signedBy, email];\n          const xfdfArray = [...xfdf, xfdfSigned];\n          await documentRef.update({\n            xfdf: xfdfArray,\n            signedBy: signedByArray,\n          });\n\n          if (signedByArray.length === emails.length) {\n            const time = new Date();\n            await documentRef.update({\n              signed: true,\n              signedTime: time,\n            });\n\n            mergeAnnotations(docRef, xfdfArray);\n          }\n        }\n      } else {\n        console.log('No such document!');\n      }\n    })\n    .catch(function (error) {\n      console.log('Error getting document:', error);\n    });\n};\n\nexport const searchForDocumentToSign = async email => {\n  const documentsRef = firestore.collection('documentsToSign');\n  const query = documentsRef\n    .where('emails', 'array-contains',email )\n    .where('signed', '==', false);\n\n  const querySigned = documentsRef\n    .where('signedBy', 'array-contains', email);\n\n  const docIds = [];\n  const docIdSigned = [];\n\n  await querySigned\n    .get()\n    .then(function (querySnapshot) {\n      querySnapshot.forEach(function (doc) {\n        const docId = doc.id;\n        docIdSigned.push(docId);\n      });\n    })\n    .catch(function (error) {\n      console.log('Error getting documents: ', error);\n    });\n\n  await query\n    .get()\n    .then(function (querySnapshot) {\n      querySnapshot.forEach(function (doc) {\n        const { docRef, email, requestedTime } = doc.data();\n        const docId = doc.id;\n        if (!docIdSigned.includes(docId)) {\n          docIds.push({ docRef, email, requestedTime, docId });\n        }\n      });\n    })\n    .catch(function (error) {\n      console.log('Error getting documents: ', error);\n    });\n  return docIds;\n};\n\n\n\n\nexport const searchForDocumentsSigned = async email => {\n  const documentsRef = firestore.collection('documentsToSign');\n\n  const docIds = [];\n\n  let query = documentsRef\n    .where('email', '==', email)\n    .where('signed', '==', true);\n\n  await query\n    .get()\n    .then(function (querySnapshot) {\n      querySnapshot.forEach(function (doc) {\n        const { docRef, emails, signedTime } = doc.data();\n        const docId = doc.id;\n        docIds.push({ docRef, emails, signedTime, docId });\n      });\n    })\n    .catch(function (error) {\n      console.log('Error getting documents: ', error);\n    });\n\n  return docIds;\n};\n","import { createSlice } from '@reduxjs/toolkit';\n\nexport const firebaseSlice = createSlice({\n  name: 'firebase',\n  initialState: {\n    user: null,\n    docs: [],\n    docsSigned: [],\n  },\n  reducers: {\n    setUser: (state, action) => {\n      // Redux Toolkit allows us to write \"mutating\" logic in reducers. It\n      // doesn't actually mutate the state because it uses the Immer library,\n      // which detects changes to a \"draft state\" and produces a brand new\n      // immutable state based off those changes\n      state.user = action.payload;\n    },\n  },\n});\n\nexport const { setUser } = firebaseSlice.actions;\n\n// The function below is called a selector and allows us to select a value from\n// the state. Selectors can also be defined inline where they're used instead of\n// in the slice file. For example: `useSelector((state) => state.counter.value)`\nexport const selectUser = state => state.firebase.user;\n\nexport default firebaseSlice.reducer;\n","import React from 'react';\nimport {\n  Box,\n  Button,\n  Text,\n  Avatar,\n  Row,\n  Stack,\n  Column,\n  Heading,\n} from 'gestalt';\nimport 'gestalt/dist/gestalt.css';\nimport { auth } from '../../firebase/firebase';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { selectUser, setUser } from '../../firebase/firebaseSlice';\nimport { resetSignee } from '../Assign/AssignSlice';\nimport { navigate, Link } from '@reach/router';\nimport './Profile.css';\n\n\nconst ProfilePage = () => {\n  const dispatch = useDispatch();\n  const user = useSelector(selectUser);\n  const { displayName, photoURL, email } = user;\n\n  return (\n    <Box display=\"flex\" direction=\"row\" paddingY={2} color={'lightGray'}>\n      <Column span={9}>\n        <Box padding={3}>\n          <Link to=\"/\" className='profileLink'><Heading size=\"lg\">PDFTron Sign App</Heading></Link>\n        </Box>\n      </Column>\n      <Column span={3}>\n        <Box padding={1}>\n          <Row>\n            <Box padding={1}>\n              <Avatar name={displayName} size=\"md\" src={photoURL} />\n            </Box>\n            <Stack>\n              <Text weight=\"bold\">{displayName}</Text>\n              <Text>{email}</Text>\n            </Stack>\n            <Box padding={1}>\n              <Button\n                onClick={() => {\n                  auth.signOut();\n                  dispatch(setUser(null));\n                  dispatch(resetSignee())\n                  navigate('/');\n                }}\n                accessibilityLabel=\"Sign out of your account\"\n                text=\"Sign out\"\n              />\n            </Box>\n          </Row>\n        </Box>\n      </Column>\n    </Box>\n  );\n};\nexport default ProfilePage;\n","import React from 'react';\nimport Assign from './Assign/Assign';\nimport Profile from './Profile/Profile';\n\nconst AssignUsers = () => {\n  return (\n    <div>\n      <Profile />\n      <Assign />\n    </div>\n  );\n};\n\nexport default AssignUsers;\n","import React, { useState } from 'react';\nimport { Link, navigate } from '@reach/router';\nimport { auth, signInWithGoogle } from '../../firebase/firebase';\nimport {\n  Box,\n  Button,\n  Toast,\n  Container,\n  Text,\n  TextField,\n  Heading,\n} from 'gestalt';\nimport 'gestalt/dist/gestalt.css';\n\nconst SignIn = () => {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState(null);\n\n  const signInWithEmailAndPasswordHandler = (event, email, password) => {\n    auth.signInWithEmailAndPassword(email, password).catch(error => {\n      setError(\"Error signing in with password and email!\");\n      console.error(\"Error signing in with password and email\", error);\n    });\n  };\n\n  return (\n    <div>\n      <Box padding={3}>\n        <Container>\n          <Box padding={3}>\n            {error !== null && <Toast text={error} />}\n            <Heading size=\"md\">Sign in</Heading>\n          </Box>\n          <Box padding={2}>\n            <TextField\n              id=\"email\"\n              onChange={event => setEmail(event.value)}\n              placeholder=\"Enter your email\"\n              label=\"Email\"\n              value={email}\n              type=\"email\"\n            />\n          </Box>\n          <Box padding={2}>\n            <TextField\n              id=\"password\"\n              onChange={event => setPassword(event.value)}\n              placeholder=\"Enter your password\"\n              label=\"Password\"\n              value={password}\n              type=\"password\"\n            />\n          </Box>\n          <Box padding={2}>\n            <Button\n              onClick={event => {\n                signInWithEmailAndPasswordHandler(event, email, password);\n                navigate('/');\n              }}\n              text=\"Sign in\"\n              color=\"blue\"\n              inline\n            />\n          </Box>\n\n          <Box padding={2}>\n            <Text>or</Text>\n          </Box>\n          <Box padding={2}>\n            <Button onClick={signInWithGoogle} text=\"Sign in with Google\" color=\"red\" inline />\n          </Box>\n          <Box padding={2}>\n            <Text>Don't have an account?</Text>\n          </Box>\n          <Box padding={2}>\n            <Link to=\"signUp\" className=\"text-blue-500 hover:text-blue-600\">\n              Sign up here\n            </Link>\n          </Box>\n          <Box padding={2}>\n            <Link\n              to=\"passwordReset\"\n              className=\"text-blue-500 hover:text-blue-600\"\n            >\n              Forgot Password?\n            </Link>\n          </Box>\n        </Container>\n      </Box>\n    </div>\n  );\n};\nexport default SignIn;\n","import React, { useState } from 'react';\nimport { Link, navigate } from '@reach/router';\nimport { auth, signInWithGoogle, generateUserDocument } from '../../firebase/firebase';\nimport {\n    Box,\n    Button,\n    Toast,\n    Container,\n    Text,\n    TextField,\n    Heading,\n  } from 'gestalt';\nimport 'gestalt/dist/gestalt.css';\n\nconst SignUp = () => {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [displayName, setDisplayName] = useState('');\n  const [error, setError] = useState(null);\n\n  const createUserWithEmailAndPasswordHandler = async (event, email, password) => {\n    try{\n      const {user} = await auth.createUserWithEmailAndPassword(email, password);\n      generateUserDocument(user, {displayName});\n    }\n    catch(error){\n      setError('Error Signing up with email and password');\n    }\n\n    setEmail(\"\");\n    setPassword(\"\");\n    setDisplayName(\"\");\n  };\n\n  return (\n    <div>\n    <Box padding={3}>\n      <Container>\n        <Box padding={3}>\n          {error !== null && <Toast text={error} />}\n          <Heading size=\"md\">Sign up</Heading>\n        </Box>\n        <Box padding={2}>\n          <TextField\n            id=\"displayName\"\n            onChange={event => setDisplayName(event.value)}\n            placeholder=\"Enter your name\"\n            label=\"Name\"\n            value={displayName}\n            type=\"text\"\n          />\n        </Box>\n        <Box padding={2}>\n          <TextField\n            id=\"email\"\n            onChange={event => setEmail(event.value)}\n            placeholder=\"Enter your email\"\n            label=\"Email\"\n            value={email}\n            type=\"email\"\n          />\n        </Box>\n        <Box padding={2}>\n          <TextField\n            id=\"password\"\n            onChange={event => setPassword(event.value)}\n            placeholder=\"Enter your password\"\n            label=\"Password\"\n            value={password}\n            type=\"password\"\n          />\n        </Box>\n        <Box padding={2}>\n          <Button\n            onClick={event => {\n                createUserWithEmailAndPasswordHandler(event, email, password);\n                navigate('/');\n              }}\n            text=\"Sign up\"\n            color=\"blue\"\n            inline\n          />\n        </Box>\n\n        <Box padding={2}>\n          <Text>or</Text>\n        </Box>\n        <Box padding={2}>\n          <Button onClick={signInWithGoogle} text=\"Sign in with Google\" color=\"red\" inline />\n        </Box>\n        <Box padding={2}>\n          <Text>Already have an account?</Text>\n        </Box>\n        <Box padding={2}>\n        <Link to=\"/\" className=\"text-blue-500 hover:text-blue-600\">\n            Sign in here\n          </Link>\n        </Box>\n      </Container>\n    </Box>\n  </div>\n  );\n};\nexport default SignUp;\n","import React, { useRef, useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { navigate } from '@reach/router';\nimport {\n  Box,\n  Column,\n  Heading,\n  Row,\n  Stack,\n  Text,\n  Button,\n  SelectList,\n} from 'gestalt';\nimport { selectAssignees, resetSignee } from '../Assign/AssignSlice';\nimport { storage, addDocumentToSign } from '../../firebase/firebase';\nimport { selectUser } from '../../firebase/firebaseSlice';\nimport WebViewer from '@pdftron/webviewer';\nimport 'gestalt/dist/gestalt.css';\nimport './PrepareDocument.css';\n\nconst PrepareDocument = () => {\n  const [instance, setInstance] = useState(null);\n  const [dropPoint, setDropPoint] = useState(null);\n\n  const dispatch = useDispatch();\n\n  const assignees = useSelector(selectAssignees);\n  const assigneesValues = assignees.map(user => {\n    return { value: user.email, label: user.name };\n  });\n  let initialAssignee =\n    assigneesValues.length > 0 ? assigneesValues[0].value : '';\n  const [assignee, setAssignee] = useState(initialAssignee);\n\n  const user = useSelector(selectUser);\n  const { uid, email } = user;\n\n  const viewer = useRef(null);\n  const filePicker = useRef(null);\n\n  // if using a class, equivalent of componentDidMount\n  useEffect(() => {\n    WebViewer(\n      {\n        path: 'webviewer',\n        disabledElements: [\n          'ribbons',\n          'toggleNotesButton',\n          'searchButton',\n          'menuButton',\n        ],\n      },\n      viewer.current,\n    ).then(instance => {\n      const { iframeWindow } = instance;\n\n      // select only the view group\n      instance.setToolbarGroup('toolbarGroup-View');\n\n      setInstance(instance);\n\n      const iframeDoc = iframeWindow.document.body;\n      iframeDoc.addEventListener('dragover', dragOver);\n      iframeDoc.addEventListener('drop', e => {\n        drop(e, instance);\n      });\n\n      filePicker.current.onchange = e => {\n        const file = e.target.files[0];\n        if (file) {\n          instance.loadDocument(file);\n        }\n      };\n    });\n  }, []);\n\n  const applyFields = async () => {\n    const { Annotations, docViewer } = instance;\n    const annotManager = docViewer.getAnnotationManager();\n    const fieldManager = annotManager.getFieldManager();\n    const annotationsList = annotManager.getAnnotationsList();\n    const annotsToDelete = [];\n    const annotsToDraw = [];\n\n    await Promise.all(\n      annotationsList.map(async (annot, index) => {\n        let inputAnnot;\n        let field;\n\n        if (typeof annot.custom !== 'undefined') {\n          // create a form field based on the type of annotation\n          if (annot.custom.type === 'TEXT') {\n            field = new Annotations.Forms.Field(\n              annot.getContents() + Date.now() + index,\n              {\n                type: 'Tx',\n                value: annot.custom.value,\n              },\n            );\n            inputAnnot = new Annotations.TextWidgetAnnotation(field);\n          } else if (annot.custom.type === 'SIGNATURE') {\n            field = new Annotations.Forms.Field(\n              annot.getContents() + Date.now() + index,\n              {\n                type: 'Sig',\n              },\n            );\n            inputAnnot = new Annotations.SignatureWidgetAnnotation(field, {\n              appearance: '_DEFAULT',\n              appearances: {\n                _DEFAULT: {\n                  Normal: {\n                    data:\n                      'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjEuMWMqnEsAAAANSURBVBhXY/j//z8DAAj8Av6IXwbgAAAAAElFTkSuQmCC',\n                    offset: {\n                      x: 100,\n                      y: 100,\n                    },\n                  },\n                },\n              },\n            });\n          } else if (annot.custom.type === 'DATE') {\n            field = new Annotations.Forms.Field(\n              annot.getContents() + Date.now() + index,\n              {\n                type: 'Tx',\n                value: 'm-d-yyyy',\n                // Actions need to be added for DatePickerWidgetAnnotation to recognize this field.\n                actions: {\n                  F: [\n                    {\n                      name: 'JavaScript',\n                      // You can customize the date format here between the two double-quotation marks\n                      // or leave this blank to use the default format\n                      javascript: 'AFDate_FormatEx(\"mmm d, yyyy\");',\n                    },\n                  ],\n                  K: [\n                    {\n                      name: 'JavaScript',\n                      // You can customize the date format here between the two double-quotation marks\n                      // or leave this blank to use the default format\n                      javascript: 'AFDate_FormatEx(\"mmm d, yyyy\");',\n                    },\n                  ],\n                },\n              },\n            );\n  \n            inputAnnot = new Annotations.DatePickerWidgetAnnotation(field);\n          } else {\n            // exit early for other annotations\n            annotManager.deleteAnnotation(annot, false, true); // prevent duplicates when importing xfdf\n            return;\n          }\n        } else {\n          // exit early for other annotations\n          return;\n        }\n\n        // set position\n        inputAnnot.PageNumber = annot.getPageNumber();\n        inputAnnot.X = annot.getX();\n        inputAnnot.Y = annot.getY();\n        inputAnnot.rotation = annot.Rotation;\n        if (annot.Rotation === 0 || annot.Rotation === 180) {\n          inputAnnot.Width = annot.getWidth();\n          inputAnnot.Height = annot.getHeight();\n        } else {\n          inputAnnot.Width = annot.getHeight();\n          inputAnnot.Height = annot.getWidth();\n        }\n\n        // delete original annotation\n        annotsToDelete.push(annot);\n\n        // customize styles of the form field\n        Annotations.WidgetAnnotation.getCustomStyles = function (widget) {\n          if (widget instanceof Annotations.SignatureWidgetAnnotation) {\n            return {\n              border: '1px solid #a5c7ff',\n            };\n          }\n        };\n        Annotations.WidgetAnnotation.getCustomStyles(inputAnnot);\n\n        // draw the annotation the viewer\n        annotManager.addAnnotation(inputAnnot);\n        fieldManager.addField(field);\n        annotsToDraw.push(inputAnnot);\n      }),\n    );\n\n    // delete old annotations\n    annotManager.deleteAnnotations(annotsToDelete, null, true);\n\n    // refresh viewer\n    await annotManager.drawAnnotationsFromList(annotsToDraw);\n    await uploadForSigning();\n  };\n\n  const addField = (type, point = {}, name = '', value = '', flag = {}) => {\n    const { docViewer, Annotations } = instance;\n    const annotManager = docViewer.getAnnotationManager();\n    const doc = docViewer.getDocument();\n    const displayMode = docViewer.getDisplayModeManager().getDisplayMode();\n    const page = displayMode.getSelectedPages(point, point);\n    if (!!point.x && page.first == null) {\n      return; //don't add field to an invalid page location\n    }\n    const page_idx =\n      page.first !== null ? page.first : docViewer.getCurrentPage();\n    const page_info = doc.getPageInfo(page_idx);\n    const page_point = displayMode.windowToPage(point, page_idx);\n    const zoom = docViewer.getZoom();\n\n    var textAnnot = new Annotations.FreeTextAnnotation();\n    textAnnot.PageNumber = page_idx;\n    const rotation = docViewer.getCompleteRotation(page_idx) * 90;\n    textAnnot.Rotation = rotation;\n    if (rotation === 270 || rotation === 90) {\n      textAnnot.Width = 50.0 / zoom;\n      textAnnot.Height = 250.0 / zoom;\n    } else {\n      textAnnot.Width = 250.0 / zoom;\n      textAnnot.Height = 50.0 / zoom;\n    }\n    textAnnot.X = (page_point.x || page_info.width / 2) - textAnnot.Width / 2;\n    textAnnot.Y = (page_point.y || page_info.height / 2) - textAnnot.Height / 2;\n\n    textAnnot.setPadding(new Annotations.Rect(0, 0, 0, 0));\n    textAnnot.custom = {\n      type,\n      value,\n      flag,\n      name: `${assignee}_${type}_`,\n    };\n\n    // set the type of annot\n    textAnnot.setContents(textAnnot.custom.name);\n    textAnnot.FontSize = '' + 20.0 / zoom + 'px';\n    textAnnot.FillColor = new Annotations.Color(211, 211, 211, 0.5);\n    textAnnot.TextColor = new Annotations.Color(0, 165, 228);\n    textAnnot.StrokeThickness = 1;\n    textAnnot.StrokeColor = new Annotations.Color(0, 165, 228);\n    textAnnot.TextAlign = 'center';\n\n    textAnnot.Author = annotManager.getCurrentUser();\n\n    annotManager.deselectAllAnnotations();\n    annotManager.addAnnotation(textAnnot, true);\n    annotManager.redrawAnnotation(textAnnot);\n    annotManager.selectAnnotation(textAnnot);\n  };\n\n  const uploadForSigning = async () => {\n    // upload the PDF with fields as AcroForm\n    const storageRef = storage.ref();\n    const referenceString = `docToSign/${uid}${Date.now()}.pdf`;\n    const docRef = storageRef.child(referenceString);\n    const { docViewer, annotManager } = instance;\n    const doc = docViewer.getDocument();\n    const xfdfString = await annotManager.exportAnnotations({ widgets: true, fields: true });\n    const data = await doc.getFileData({ xfdfString });\n    const arr = new Uint8Array(data);\n    const blob = new Blob([arr], { type: 'application/pdf' });\n    docRef.put(blob).then(function (snapshot) {\n      console.log('Uploaded the blob');\n    });\n\n    // create an entry in the database\n    const emails = assignees.map(assignee => {\n      return assignee.email;\n    });\n    await addDocumentToSign(uid, email, referenceString, emails);\n    dispatch(resetSignee());\n    navigate('/');\n  };\n\n  const dragOver = e => {\n    e.preventDefault();\n    return false;\n  };\n\n  const drop = (e, instance) => {\n    const { docViewer } = instance;\n    const scrollElement = docViewer.getScrollViewElement();\n    const scrollLeft = scrollElement.scrollLeft || 0;\n    const scrollTop = scrollElement.scrollTop || 0;\n    setDropPoint({ x: e.pageX + scrollLeft, y: e.pageY + scrollTop });\n    e.preventDefault();\n    return false;\n  };\n\n  const dragStart = e => {\n    e.target.style.opacity = 0.5;\n    const copy = e.target.cloneNode(true);\n    copy.id = 'form-build-drag-image-copy';\n    copy.style.width = '250px';\n    document.body.appendChild(copy);\n    e.dataTransfer.setDragImage(copy, 125, 25);\n    e.dataTransfer.setData('text', '');\n  };\n\n  const dragEnd = (e, type) => {\n    addField(type, dropPoint);\n    e.target.style.opacity = 1;\n    document.body.removeChild(\n      document.getElementById('form-build-drag-image-copy'),\n    );\n    e.preventDefault();\n  };\n\n  return (\n    <div className={'prepareDocument'}>\n      <Box display=\"flex\" direction=\"row\" flex=\"grow\">\n        <Column span={2}>\n          <Box padding={3}>\n            <Heading size=\"md\">Prepare Document</Heading>\n          </Box>\n          <Box padding={3}>\n            <Row gap={1}>\n              <Stack>\n                <Box padding={2}>\n                  <Text>{'Step 1'}</Text>\n                </Box>\n                <Box padding={2}>\n                  <Button\n                    onClick={() => {\n                      if (filePicker) {\n                        filePicker.current.click();\n                      }\n                    }}\n                    accessibilityLabel=\"upload a document\"\n                    text=\"Upload a document\"\n                    iconEnd=\"add-circle\"\n                  />\n                </Box>\n              </Stack>\n            </Row>\n            <Row>\n              <Stack>\n                <Box padding={2}>\n                  <Text>{'Step 2'}</Text>\n                </Box>\n                <Box padding={2}>\n                  <SelectList\n                    id=\"assigningFor\"\n                    name=\"assign\"\n                    onChange={({ value }) => setAssignee(value)}\n                    options={assigneesValues}\n                    placeholder=\"Select recipient\"\n                    label=\"Adding signature for\"\n                    value={assignee}\n                  />\n                </Box>\n                <Box padding={2}>\n                  <div\n                    draggable\n                    onDragStart={e => dragStart(e)}\n                    onDragEnd={e => dragEnd(e, 'SIGNATURE')}\n                  >\n                    <Button\n                      onClick={() => addField('SIGNATURE')}\n                      accessibilityLabel=\"add signature\"\n                      text=\"Add signature\"\n                      iconEnd=\"compose\"\n                    />\n                  </div>\n                </Box>\n                <Box padding={2}>\n                  <div\n                    draggable\n                    onDragStart={e => dragStart(e)}\n                    onDragEnd={e => dragEnd(e, 'TEXT')}\n                  >\n                    <Button\n                      onClick={() => addField('TEXT')}\n                      accessibilityLabel=\"add text\"\n                      text=\"Add text\"\n                      iconEnd=\"text-sentence-case\"\n                    />\n                  </div>\n                </Box>\n                <Box padding={2}>\n                  <div\n                    draggable\n                    onDragStart={e => dragStart(e)}\n                    onDragEnd={e => dragEnd(e, 'DATE')}\n                  >\n                    <Button\n                      onClick={() => addField('DATE')}\n                      accessibilityLabel=\"add date field\"\n                      text=\"Add date\"\n                      iconEnd=\"calendar\"\n                    />\n                  </div>\n                </Box>\n              </Stack>\n            </Row>\n            <Row gap={1}>\n              <Stack>\n                <Box padding={2}>\n                  <Text>{'Step 3'}</Text>\n                </Box>\n                <Box padding={2}>\n                  <Button\n                    onClick={applyFields}\n                    accessibilityLabel=\"Send for signing\"\n                    text=\"Send\"\n                    iconEnd=\"send\"\n                  />\n                </Box>\n              </Stack>\n            </Row>\n          </Box>\n        </Column>\n        <Column span={10}>\n          <div className=\"webviewer\" ref={viewer}></div>\n        </Column>\n      </Box>\n      <input type=\"file\" ref={filePicker} style={{ display: 'none' }} />\n    </div>\n  );\n};\n\nexport default PrepareDocument;\n","import React from 'react';\nimport Profile from './Profile/Profile';\nimport PrepareDocument from './PrepareDocument/PrepareDocument';\n\nconst Preparation = () => {\n  return (\n    <div>\n      <Profile />\n      <PrepareDocument />\n    </div>\n  );\n};\n\nexport default Preparation;","import { createSlice } from '@reduxjs/toolkit';\n\nexport const SignDocumentSlice = createSlice({\n  name: 'signDoc',\n  initialState: {\n    docToSign: null,\n  },\n  reducers: {\n    setDocToSign: (state, action) => {\n      state.docToSign = action.payload;\n    },\n    resetDocToSign: (state, action) => {\n      state.docToSign = null;\n    }\n  },\n});\n\nexport const { setDocToSign, resetDocToSign } = SignDocumentSlice.actions;\n\nexport const selectDocToSign = state => state.signDoc.docToSign;\n\nexport default SignDocumentSlice.reducer;\n","import React, { useRef, useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { navigate } from '@reach/router';\nimport { Box, Column, Heading, Row, Stack, Button } from 'gestalt';\nimport { selectDocToSign } from './SignDocumentSlice';\nimport { storage, updateDocumentToSign } from '../../firebase/firebase';\nimport { selectUser } from '../../firebase/firebaseSlice';\nimport WebViewer from '@pdftron/webviewer';\nimport 'gestalt/dist/gestalt.css';\nimport './SignDocument.css';\n\nconst SignDocument = () => {\n  const [annotManager, setAnnotatManager] = useState(null);\n  const [annotPosition, setAnnotPosition] = useState(0);\n\n  const doc = useSelector(selectDocToSign);\n  const user = useSelector(selectUser);\n  const { docRef, docId } = doc;\n  const { email } = user;\n\n  const viewer = useRef(null);\n\n  useEffect(() => {\n    WebViewer(\n      {\n        path: 'webviewer',\n        disabledElements: [\n          'ribbons',\n          'toggleNotesButton',\n          'searchButton',\n          'menuButton',\n          'rubberStampToolGroupButton',\n          'stampToolGroupButton',\n          'fileAttachmentToolGroupButton',\n          'calloutToolGroupButton',\n          'undo',\n          'redo',\n          'eraserToolButton'\n        ],\n      },\n      viewer.current,\n    ).then(async instance => {\n      const { docViewer, annotManager, Annotations } = instance;\n      setAnnotatManager(annotManager);\n\n      // select only the insert group\n      instance.setToolbarGroup('toolbarGroup-Insert');\n\n      // load document\n      const storageRef = storage.ref();\n      const URL = await storageRef.child(docRef).getDownloadURL();\n      docViewer.loadDocument(URL);\n\n      const normalStyles = (widget) => {\n        if (widget instanceof Annotations.TextWidgetAnnotation) {\n          return {\n            'background-color': '#a5c7ff',\n            color: 'white',\n          };\n        } else if (widget instanceof Annotations.SignatureWidgetAnnotation) {\n          return {\n            border: '1px solid #a5c7ff',\n          };\n        }\n      };\n\n      annotManager.on('annotationChanged', (annotations, action, { imported }) => {\n        if (imported && action === 'add') {\n          annotations.forEach(function(annot) {\n            if (annot instanceof Annotations.WidgetAnnotation) {\n              Annotations.WidgetAnnotation.getCustomStyles = normalStyles;\n              if (!annot.fieldName.startsWith(email)) {\n                annot.Hidden = true;\n                annot.Listable = false;\n              }\n            }\n          });\n        }\n      });\n    });\n  }, [docRef, email]);\n\n  const nextField = () => {\n    let annots = annotManager.getAnnotationsList();\n    if (annots[annotPosition]) {\n      annotManager.jumpToAnnotation(annots[annotPosition]);\n      if (annots[annotPosition+1]) {\n        setAnnotPosition(annotPosition+1);\n      }\n    }\n  }\n\n  const prevField = () => {\n    let annots = annotManager.getAnnotationsList();\n    if (annots[annotPosition]) {\n      annotManager.jumpToAnnotation(annots[annotPosition]);\n      if (annots[annotPosition-1]) {\n        setAnnotPosition(annotPosition-1);\n      }\n    }\n  }\n\n  const completeSigning = async () => {\n    const xfdf = await annotManager.exportAnnotations({ widgets: false, links: false });\n    await updateDocumentToSign(docId, email, xfdf);\n    navigate('/');\n  }\n\n  return (\n    <div className={'prepareDocument'}>\n      <Box display=\"flex\" direction=\"row\" flex=\"grow\">\n        <Column span={2}>\n          <Box padding={3}>\n            <Heading size=\"md\">Sign Document</Heading>\n          </Box>\n          <Box padding={3}>\n            <Row gap={1}>\n              <Stack>\n                <Box padding={2}>\n                  <Button\n                    onClick={nextField}\n                    accessibilityLabel=\"next field\"\n                    text=\"Next field\"\n                    iconEnd=\"arrow-forward\"\n                  />\n                </Box>\n                <Box padding={2}>\n                  <Button\n                    onClick={prevField}\n                    accessibilityLabel=\"Previous field\"\n                    text=\"Previous field\"\n                    iconEnd=\"arrow-back\"\n                  />\n                </Box>\n                <Box padding={2}>\n                  <Button\n                    onClick={completeSigning}\n                    accessibilityLabel=\"complete signing\"\n                    text=\"Complete signing\"\n                    iconEnd=\"compose\"\n                  />\n                </Box>\n              </Stack>\n            </Row>\n          </Box>\n        </Column>\n        <Column span={10}>\n          <div className=\"webviewer\" ref={viewer}></div>\n        </Column>\n      </Box>\n    </div>\n  );\n};\n\nexport default SignDocument;\n","import React from 'react';\nimport Profile from './Profile/Profile';\nimport SignDocument from './SignDocument/SignDocument';\n\nconst Sign = () => {\n  return (\n    <div>\n      <Profile />\n      <SignDocument />\n    </div>\n  );\n};\n\nexport default Sign;","import { createSlice } from '@reduxjs/toolkit';\n\nexport const ViewDocumentSlice = createSlice({\n  name: 'viewDoc',\n  initialState: {\n    docToView: null,\n  },\n  reducers: {\n    setDocToView: (state, action) => {\n      state.docToView = action.payload;\n    },\n    resetDocToView: (state, action) => {\n      state.docToView = null;\n    }\n  },\n});\n\nexport const { setDocToView, resetDocToView } = ViewDocumentSlice.actions;\n\nexport const selectDocToView = state => state.viewDoc.docToView;\n\nexport default ViewDocumentSlice.reducer;\n","import React, { useRef, useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { navigate } from '@reach/router';\nimport { Box, Column, Heading, Row, Stack, Button } from 'gestalt';\nimport { selectDocToView } from './ViewDocumentSlice';\nimport { storage } from '../../firebase/firebase';\nimport WebViewer from '@pdftron/webviewer';\nimport 'gestalt/dist/gestalt.css';\nimport './ViewDocument.css';\n\nconst ViewDocument = () => {\n  const [instance, setInstance] = useState(null);\n\n  const doc = useSelector(selectDocToView);\n  const { docRef } = doc;\n\n  const viewer = useRef(null);\n\n  useEffect(() => {\n    WebViewer(\n      {\n        path: 'webviewer',\n        disabledElements: [\n          'ribbons',\n          'toggleNotesButton',\n          'contextMenuPopup',\n        ],\n      },\n      viewer.current,\n    ).then(async instance => {\n      // select only the view group\n      instance.setToolbarGroup('toolbarGroup-View');\n\n      setInstance(instance);\n\n      // load document\n      const storageRef = storage.ref();\n      const URL = await storageRef.child(docRef).getDownloadURL();\n      console.log(URL);\n      instance.docViewer.loadDocument(URL);\n    });\n  }, [docRef]);\n\n  const download = () => {\n    instance.downloadPdf(true);\n  };\n\n  const doneViewing = async () => {\n    navigate('/');\n  }\n\n  return (\n    <div className={'prepareDocument'}>\n      <Box display=\"flex\" direction=\"row\" flex=\"grow\">\n        <Column span={2}>\n          <Box padding={3}>\n            <Heading size=\"md\">View Document</Heading>\n          </Box>\n          <Box padding={3}>\n            <Row gap={1}>\n              <Stack>\n                <Box padding={2}>\n                  <Button\n                    onClick={download}\n                    accessibilityLabel=\"download signed document\"\n                    text=\"Download\"\n                    iconEnd=\"download\"\n                  />\n                </Box>\n                <Box padding={2}>\n                  <Button\n                    onClick={doneViewing}\n                    accessibilityLabel=\"complete signing\"\n                    text=\"Done viewing\"\n                    iconEnd=\"check\"\n                  />\n                </Box>\n              </Stack>\n            </Row>\n          </Box>\n        </Column>\n        <Column span={10}>\n          <div className=\"webviewer\" ref={viewer}></div>\n        </Column>\n      </Box>\n    </div>\n  );\n};\n\nexport default ViewDocument;\n","import React from 'react';\nimport Profile from './Profile/Profile';\nimport ViewDocument from './ViewDocument/ViewDocument';\n\nconst View = () => {\n  return (\n    <div>\n      <Profile />\n      <ViewDocument />\n    </div>\n  );\n};\n\nexport default View;","import React from 'react';\nimport { Box, Column, Heading } from 'gestalt';\nimport 'gestalt/dist/gestalt.css';\n\nconst Header = () =>  {\n    return (<Box display=\"flex\" direction=\"row\" paddingY={2} color={'lightGray'}>\n    <Column span={10}>\n      <Box padding={3}>\n        <Heading size=\"lg\">PDFTron Sign App</Heading>\n      </Box>\n    </Column>\n    </Box>);\n}\n\nexport default Header;","import React, { useState } from 'react';\nimport { Link, navigate } from '@reach/router';\nimport { Box, Button, Toast, Container, TextField, Heading } from 'gestalt';\nimport 'gestalt/dist/gestalt.css';\n\nimport { auth } from '../../firebase/firebase';\n\nconst PasswordReset = () => {\n  const [email, setEmail] = useState('');\n  const [emailHasBeenSent, setEmailHasBeenSent] = useState(false);\n  const [error, setError] = useState(null);\n\n  const sendResetEmail = event => {\n    auth\n      .sendPasswordResetEmail(email)\n      .then(() => {\n        setEmailHasBeenSent(true);\n        setTimeout(() => {\n          setEmailHasBeenSent(false);\n        }, 3000);\n      })\n      .catch(() => {\n        setError('Error resetting password');\n      });\n  };\n\n  return (\n    <div>\n      <Box padding={3}>\n        <Container>\n          <Box padding={3}>\n            <Heading size=\"md\">Reset your password</Heading>\n          </Box>\n          {error !== null && <Toast text={error} />}\n          {emailHasBeenSent !== false && (\n            <Toast text={'An email with reset info is on the way'} />\n          )}\n          <Box padding={2}>\n            <TextField\n              id=\"email\"\n              onChange={event => setEmail(event.value)}\n              placeholder=\"Enter your email\"\n              label=\"Email\"\n              value={email}\n              type=\"email\"\n            />\n          </Box>\n          <Box padding={2}>\n            <Button\n              onClick={event => {\n                sendResetEmail(event);\n                navigate('/');\n              }}\n              text=\"Reset\"\n              color=\"blue\"\n              inline\n            />\n          </Box>\n          <Box padding={2}>\n            <Link to=\"/\" className=\"text-blue-500 hover:text-blue-600\">\n              Back to the Sign in\n            </Link>\n          </Box>\n        </Container>\n      </Box>\n    </div>\n  );\n};\nexport default PasswordReset;\n","import React, { useEffect, useState } from 'react';\nimport { Button, Table, Text, Spinner } from 'gestalt';\nimport 'gestalt/dist/gestalt.css';\nimport { useDispatch, useSelector } from 'react-redux';\nimport {  searchForDocumentToSign } from '../../firebase/firebase';\nimport { selectUser } from '../../firebase/firebaseSlice';\nimport { setDocToSign } from '../SignDocument/SignDocumentSlice';\nimport { navigate } from '@reach/router';\nconst SignList = () => {\n  const user = useSelector(selectUser);\n  const { email } = user;\n\n  const [docs, setDocs] = useState([]);\n  const [show, setShow] = useState(true);\n\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    async function getDocs() {\n      console.log(\"email\", email)\n      const docsToSign = await searchForDocumentToSign(email);\n      console.log(docsToSign)\n      setDocs(docsToSign);\n      setShow(false);\n    }\n\n    setTimeout(getDocs, 1000);\n  }, [email]);\n\n  return (\n    <div>\n      {show ? (\n        <Spinner show={show} accessibilityLabel=\"spinner\" />\n      ) : (\n        <div>\n          {docs.length > 0 ? (\n            <Table>\n              <Table.Header>\n                <Table.Row>\n                  <Table.HeaderCell>\n                    <Text weight=\"bold\">From</Text>\n                  </Table.HeaderCell>\n                  <Table.HeaderCell>\n                    <Text weight=\"bold\">When</Text>\n                  </Table.HeaderCell>\n                </Table.Row>\n              </Table.Header>\n              <Table.Body>\n                {docs.map(doc => (\n                  <Table.Row key={doc.docRef}>\n                    <Table.Cell>\n                      <Text>{doc.email}</Text>\n                    </Table.Cell>\n                    <Table.Cell>\n                      <Text>{doc.requestedTime ? new Date(doc.requestedTime.seconds*1000).toDateString() : ''}</Text>\n                    </Table.Cell>\n                    <Table.Cell>\n                      <Button\n                        onClick={event => {\n                          const { docRef, docId } = doc;\n                          dispatch(setDocToSign({ docRef, docId }));\n                          navigate(`/signDocument`);\n                        }}\n                        text=\"Sign\"\n                        color=\"blue\"\n                        inline\n                      />\n                    </Table.Cell>\n                  </Table.Row>\n                ))}\n              </Table.Body>\n            </Table>\n          ) : (\n            'You do not have any documents to sign'\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default SignList;\n","import React, { useEffect, useState } from 'react';\nimport { Button, Table, Text, Spinner } from 'gestalt';\nimport 'gestalt/dist/gestalt.css';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { searchForDocumentsSigned } from '../../firebase/firebase';\nimport { selectUser } from '../../firebase/firebaseSlice';\nimport { setDocToView } from '../ViewDocument/ViewDocumentSlice';\nimport { navigate } from '@reach/router';\n\nconst SignedList = () => {\n  const user = useSelector(selectUser);\n  const { email } = user;\n  const [docs, setDocs] = useState([]);\n  const [show, setShow] = useState(true);\n\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    async function getDocs() {\n      const docsToView = await searchForDocumentsSigned(email);\n      setDocs(docsToView);\n      setShow(false);\n    }\n    setTimeout(getDocs, 1000);\n  }, [email]);\n\n  return (\n    <div>\n      {show ? (\n        <Spinner show={show} accessibilityLabel=\"spinner\" />\n      ) : (\n        <div>\n          {docs.length > 0 ? (\n            <Table>\n              <Table.Header>\n                <Table.Row>\n                  <Table.HeaderCell>\n                    <Text weight=\"bold\">From</Text>\n                  </Table.HeaderCell>\n                  <Table.HeaderCell>\n                    <Text weight=\"bold\">When</Text>\n                  </Table.HeaderCell>\n                </Table.Row>\n              </Table.Header>\n              <Table.Body>\n                {docs.map(doc => (\n                  <Table.Row key={doc.docRef}>\n                    <Table.Cell>\n                      {doc.emails.map(email => (\n                        <Text key={email}>{email}</Text>\n                      ))}\n                    </Table.Cell>\n                    <Table.Cell>\n                      <Text>{doc.signedTime ? new Date(doc.signedTime.seconds*1000).toDateString() : ''}</Text>\n                    </Table.Cell>\n                    <Table.Cell>\n                      <Button\n                        onClick={event => {\n                          const { docRef, docId } = doc;\n                          dispatch(setDocToView({ docRef, docId }));\n                          navigate(`/viewDocument`);\n                        }}\n                        text=\"View\"\n                        color=\"blue\"\n                        inline\n                      />\n                    </Table.Cell>\n                  </Table.Row>\n                ))}\n              </Table.Body>\n            </Table>\n          ) : (\n            'You do not have any documents to review'\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default SignedList;\n","import React, { useEffect } from 'react';\nimport Profile from './Profile/Profile';\nimport { navigate } from '@reach/router';\nimport { useDispatch } from 'react-redux';\nimport SignList from './Lists/SignList';\nimport SignedList from './Lists/SignedList';\nimport { resetDocToView } from './ViewDocument/ViewDocumentSlice';\nimport { resetDocToSign } from './SignDocument/SignDocumentSlice';\nimport { Box, Button, Container, Heading } from 'gestalt';\nimport 'gestalt/dist/gestalt.css';\n\n\nconst ProfilePage = () => {\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch(resetDocToView());\n    dispatch(resetDocToSign());\n  }, [dispatch]);\n\n  return (\n    <div>\n      <Profile />\n      <Container>\n        <Box padding={3}>\n          <Heading size=\"md\">{`Sign Documents`}</Heading>\n        </Box>\n        <Box padding={3}>\n          <SignList />\n        </Box>\n        <Box padding={3}>\n          <Heading size=\"md\">{`Prepare Document`}</Heading>\n        </Box>\n        <Box padding={2}>\n          <Button\n            onClick={event => {\n              navigate(`/assignUsers`);\n            }}\n            text=\"Prepare Document for Signing\"\n            color=\"blue\"\n            inline\n          />\n        </Box>\n        <Box padding={3}>\n          <Heading size=\"md\">{`Review Signed Documents`}</Heading>\n        </Box>\n        <Box padding={3}>\n          <SignedList />\n        </Box>\n      </Container>\n    </div>\n  );\n};\nexport default ProfilePage;\n","import React, { useEffect } from 'react';\r\nimport { Router } from '@reach/router';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\n\r\nimport AssignUsers from './components/AssignUsers';\r\nimport SignIn from './components/SignIn/SignIn';\r\nimport SignUp from './components/SignUp/SignUp';\r\nimport Preparation from './components/Preparation';\r\nimport Sign from './components/Sign';\r\nimport View from './components/View';\r\nimport Header from './components/Header';\r\nimport PasswordReset from './components/PasswordReset/PasswordReset';\r\nimport Welcome from './components/Welcome';\r\n\r\nimport { auth, generateUserDocument } from './firebase/firebase';\r\nimport { setUser, selectUser } from './firebase/firebaseSlice';\r\n\r\nimport './App.css';\r\n\r\nconst App = () => {\r\n  const user = useSelector(selectUser);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    auth.onAuthStateChanged(async userAuth => {\r\n      if (userAuth) {\r\n        const user = await generateUserDocument(userAuth);\r\n        const { uid, displayName, email, photoURL } = user;\r\n        dispatch(setUser({ uid, displayName, email, photoURL }));\r\n      }\r\n    });\r\n  }, [dispatch]);\r\n\r\n  return user ? (\r\n    <div>\r\n      <Router>\r\n        <Welcome path=\"/\" />\r\n        <AssignUsers path=\"/assignUsers\" />\r\n        <Preparation path=\"/prepareDocument\" />\r\n        <Sign path=\"/signDocument\" />\r\n        <View path=\"/viewDocument\" />\r\n      </Router>\r\n    </div>\r\n  ) : (\r\n    <div>\r\n      <Header />\r\n      <Router>\r\n        <SignIn path=\"/\" />\r\n        <SignUp path=\"signUp\" />\r\n        <PasswordReset path=\"passwordReset\" />\r\n      </Router>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import { configureStore } from '@reduxjs/toolkit';\r\nimport firebaseReducer from '../firebase/firebaseSlice';\r\nimport AssignReducer from '../components/Assign/AssignSlice';\r\nimport SignDocumentReducer from '../components/SignDocument/SignDocumentSlice';\r\nimport ViewDocumentReducer from '../components/ViewDocument/ViewDocumentSlice';\r\n\r\nexport default configureStore({\r\n  reducer: {\r\n    firebase: firebaseReducer,\r\n    assign: AssignReducer,\r\n    signDoc: SignDocumentReducer,\r\n    viewDoc: ViewDocumentReducer,\r\n  },\r\n});\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport store from './app/store';\r\nimport { Provider } from 'react-redux';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <App />\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n\r\n"],"sourceRoot":""}