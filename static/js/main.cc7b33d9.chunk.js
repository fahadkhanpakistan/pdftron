(this["webpackJsonppdftron-sign-app"]=this["webpackJsonppdftron-sign-app"]||[]).push([[0],{41:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),i=n(21),a=n.n(i),o=(n(41),n(7)),s=n(11),d=n(10),l=n(12),u=n(9),j=n(4),b=(n(17),n(27)),p=n(18),O=Object(p.b)({name:"assign",initialState:{signees:[]},reducers:{addSignee:function(e,t){e.signees=[].concat(Object(b.a)(e.signees),[{key:t.payload.key,name:t.payload.name,email:t.payload.email}])},resetSignee:function(e,t){console.log("resetSignee"),e.signees=[]}}}),h=O.actions,x=h.addSignee,g=h.resetSignee,f=function(e){return e.assign.signees},m=O.reducer,v=n(3),w=function(){var e=Object(c.useState)(""),t=Object(u.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)(""),a=Object(u.a)(i,2),o=a[0],s=a[1],b=Object(c.useState)(!1),p=Object(u.a)(b,2),O=p[0],h=p[1],g=Object(l.c)(f),m=Object(l.b)();return Object(v.jsx)("div",{children:Object(v.jsx)(j.b,{padding:3,children:Object(v.jsxs)(j.e,{children:[Object(v.jsx)(j.b,{padding:3,children:Object(v.jsx)(j.f,{size:"md",children:"Who needs to sign?"})}),Object(v.jsx)(j.b,{padding:2,children:Object(v.jsx)(j.m,{id:"displayName",onChange:function(e){return s(e.value)},placeholder:"Enter recipient's name",label:"Name",value:o,type:"text"})}),Object(v.jsx)(j.b,{padding:2,children:Object(v.jsx)(j.m,{id:"email",onChange:function(e){return r(e.value)},placeholder:"Enter recipient's email",label:"Email",value:n,type:"email"})}),Object(v.jsx)(j.b,{padding:2,children:Object(v.jsx)(j.c,{onClick:function(e){!function(e,t){var n="".concat((new Date).getTime()).concat(t);""!==e&&""!==t&&(m(x({key:n,name:e,email:t})),r(""),s(""))}(o,n)},text:"Add user",color:"blue",inline:!0})}),Object(v.jsx)(j.b,{padding:2,children:Object(v.jsxs)(j.k,{children:[Object(v.jsx)(j.k.Header,{children:Object(v.jsxs)(j.k.Row,{children:[Object(v.jsx)(j.k.HeaderCell,{children:Object(v.jsx)(j.l,{weight:"bold",children:"Name"})}),Object(v.jsx)(j.k.HeaderCell,{children:Object(v.jsx)(j.l,{weight:"bold",children:"Email"})})]})}),Object(v.jsx)(j.k.Body,{children:g.map((function(e){return Object(v.jsxs)(j.k.Row,{children:[Object(v.jsx)(j.k.Cell,{children:Object(v.jsx)(j.l,{children:e.name})}),Object(v.jsx)(j.k.Cell,{children:Object(v.jsx)(j.l,{children:e.email})})]},e.key)}))})]})}),Object(v.jsx)(j.b,{padding:2,children:Object(v.jsx)(j.c,{onClick:function(){g.length>0?Object(d.c)("/prepareDocument"):(h(!0),setTimeout((function(){return h(!1)}),1e3))},text:"Continue",color:"blue",inline:!0})}),Object(v.jsx)(j.b,{fit:!0,dangerouslySetInlineStyle:{__style:{bottom:50,left:"50%",transform:"translateX(-50%)"}},paddingX:1,position:"fixed",children:O&&Object(v.jsx)(j.n,{color:"red",text:Object(v.jsx)(v.Fragment,{children:"Please add at least one user"})})})]})})})},y=n(24),A=n(25),k=(n(51),n(59),n(60),function(){var e=Object(s.a)(Object(o.a)().mark((function e(t,n){var c,r,i,a;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=window.PDFNet,window.CoreControls.setWorkerPath("webviewer/core"),r=E.ref(),e.next=6,r.child(t).getDownloadURL();case 6:return i=e.sent,a=function(){var e=Object(s.a)(Object(o.a)().mark((function e(){var a,s,d,l,u;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.PDFDoc.createFromURL(i);case 2:(a=e.sent).initSecurityHandler(),s=0;case 5:if(!(s<n.length)){e.next=17;break}return console.log(n[s]),e.next=9,c.FDFDoc.createFromXFDF(n[s]);case 9:return d=e.sent,e.next=12,a.fdfMerge(d);case 12:return e.next=14,a.flattenAnnotations();case 14:s++,e.next=5;break;case 17:return e.next=19,a.saveMemoryBuffer(c.SDFDoc.SaveOptions.e_linearized);case 19:l=e.sent,u=new Blob([l],{type:"application/pdf"}),r.child(t).put(u).then((function(e){console.log("Uploaded the blob")}));case 23:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=10,c.runWithCleanup(a);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());A.a.initializeApp({apiKey:"AIzaSyBqbICmi_g6FYJrU_mBVhnEmdhhpgnh0EY",authDomain:"just-test-b9022.firebaseapp.com",databaseURL:"your_database_go_here",projectId:"just-test-b9022",storageBucket:"just-test-b9022.appspot.com",messagingSenderId:"450583389825",appId:"1:450583389825:web:3a120275f6a009b429cf80"});var S=A.a.auth(),D=A.a.firestore(),E=A.a.storage(),T=new A.a.auth.GoogleAuthProvider,C=function(){S.signInWithPopup(T)},R=function(){var e=Object(s.a)(Object(o.a)().mark((function e(t,n){var c,r,i,a;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return c=D.doc("users/".concat(t.uid)),e.next=5,c.get();case 5:if(e.sent.exists){e.next=16;break}return r=t.email,i=t.displayName,a=t.photoURL,e.prev=8,e.next=11,c.set(Object(y.a)({displayName:i,email:r,photoURL:a},n));case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(8),console.error("Error creating user document",e.t0);case 16:return e.abrupt("return",N(t.uid));case 17:case"end":return e.stop()}}),e,null,[[8,13]])})));return function(t,n){return e.apply(this,arguments)}}(),N=function(){var e=Object(s.a)(Object(o.a)().mark((function e(t){var n;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,D.doc("users/".concat(t)).get();case 5:return n=e.sent,e.abrupt("return",Object(y.a)({uid:t},n.data()));case 9:e.prev=9,e.t0=e.catch(2),console.error("Error fetching user",e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(s.a)(Object(o.a)().mark((function e(t,n,c,r){var i,a,s;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:!1,i=[],a=[],s=new Date,"",D.collection("documentsToSign").add({uid:t,email:n,docRef:c,emails:r,xfdf:i,signedBy:a,signed:false,requestedTime:s,signedTime:""}).then((function(e){console.log("Document written with ID: ",e.id)})).catch((function(e){console.error("Error adding document: ",e)}));case 8:case"end":return e.stop()}}),e)})));return function(t,n,c,r){return e.apply(this,arguments)}}(),L=function(){var e=Object(s.a)(Object(o.a)().mark((function e(t,n,c){var r;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=D.collection("documentsToSign").doc(t)).get().then(function(){var e=Object(s.a)(Object(o.a)().mark((function e(t){var i,a,s,d,l,u,j,p;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.exists){e.next=14;break}if(i=t.data(),a=i.signedBy,s=i.emails,d=i.xfdf,l=i.docRef,a.includes(n)){e.next=12;break}return u=[].concat(Object(b.a)(a),[n]),j=[].concat(Object(b.a)(d),[c]),e.next=7,r.update({xfdf:j,signedBy:u});case 7:if(u.length!==s.length){e.next=12;break}return p=new Date,e.next=11,r.update({signed:!0,signedTime:p});case 11:k(l,j);case 12:e.next=15;break;case 14:console.log("No such document!");case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log("Error getting document:",e)}));case 2:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),B=function(){var e=Object(s.a)(Object(o.a)().mark((function e(t){var n,c,r,i,a;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=D.collection("documentsToSign"),c=n.where("emails","array-contains",t).where("signed","==",!1),r=n.where("signedBy","array-contains",t),i=[],a=[],e.next=7,r.get().then((function(e){e.forEach((function(e){var t=e.id;a.push(t)}))})).catch((function(e){console.log("Error getting documents: ",e)}));case 7:return e.next=9,c.get().then((function(e){e.forEach((function(e){var t=e.data(),n=t.docRef,c=t.email,r=t.requestedTime,o=e.id;a.includes(o)||i.push({docRef:n,email:c,requestedTime:r,docId:o})}))})).catch((function(e){console.log("Error getting documents: ",e)}));case 9:return e.abrupt("return",i);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(s.a)(Object(o.a)().mark((function e(t){var n,c,r;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=D.collection("documentsToSign"),c=[],r=n.where("email","==",t).where("signed","==",!0),e.next=5,r.get().then((function(e){e.forEach((function(e){var t=e.data(),n=t.docRef,r=t.emails,i=t.signedTime,a=e.id;c.push({docRef:n,emails:r,signedTime:i,docId:a})}))})).catch((function(e){console.log("Error getting documents: ",e)}));case 5:return e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=Object(p.b)({name:"firebase",initialState:{user:null,docs:[],docsSigned:[]},reducers:{setUser:function(e,t){e.user=t.payload}}}),W=P.actions.setUser,I=function(e){return e.firebase.user},V=P.reducer,G=(n(53),function(){var e=Object(l.b)(),t=Object(l.c)(I),n=t.displayName,c=t.photoURL,r=t.email;return Object(v.jsxs)(j.b,{display:"flex",direction:"row",paddingY:2,color:"lightGray",children:[Object(v.jsx)(j.d,{span:9,children:Object(v.jsx)(j.b,{padding:3,children:Object(v.jsx)(d.a,{to:"/",className:"profileLink",children:Object(v.jsx)(j.f,{size:"lg",children:"PDFTron Sign App"})})})}),Object(v.jsx)(j.d,{span:3,children:Object(v.jsx)(j.b,{padding:1,children:Object(v.jsxs)(j.g,{children:[Object(v.jsx)(j.b,{padding:1,children:Object(v.jsx)(j.a,{name:n,size:"md",src:c})}),Object(v.jsxs)(j.j,{children:[Object(v.jsx)(j.l,{weight:"bold",children:n}),Object(v.jsx)(j.l,{children:r})]}),Object(v.jsx)(j.b,{padding:1,children:Object(v.jsx)(j.c,{onClick:function(){S.signOut(),e(W(null)),e(g()),Object(d.c)("/")},accessibilityLabel:"Sign out of your account",text:"Sign out"})})]})})})]})}),H=function(){return Object(v.jsxs)("div",{children:[Object(v.jsx)(G,{}),Object(v.jsx)(w,{})]})},z=function(){var e=Object(c.useState)(""),t=Object(u.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)(""),a=Object(u.a)(i,2),o=a[0],s=a[1],l=Object(c.useState)(null),b=Object(u.a)(l,2),p=b[0],O=b[1];return Object(v.jsx)("div",{children:Object(v.jsx)(j.b,{padding:3,children:Object(v.jsxs)(j.e,{children:[Object(v.jsxs)(j.b,{padding:3,children:[null!==p&&Object(v.jsx)(j.n,{text:p}),Object(v.jsx)(j.f,{size:"md",children:"Sign in"})]}),Object(v.jsx)(j.b,{padding:2,children:Object(v.jsx)(j.m,{id:"email",onChange:function(e){return r(e.value)},placeholder:"Enter your email",label:"Email",value:n,type:"email"})}),Object(v.jsx)(j.b,{padding:2,children:Object(v.jsx)(j.m,{id:"password",onChange:function(e){return s(e.value)},placeholder:"Enter your password",label:"Password",value:o,type:"password"})}),Object(v.jsx)(j.b,{padding:2,children:Object(v.jsx)(j.c,{onClick:function(e){!function(e,t,n){S.signInWithEmailAndPassword(t,n).catch((function(e){O("Error signing in with password and email!"),console.error("Error signing in with password and email",e)}))}(0,n,o),Object(d.c)("/")},text:"Sign in",color:"blue",inline:!0})}),Object(v.jsx)(j.b,{padding:2,children:Object(v.jsx)(j.l,{children:"or"})}),Object(v.jsx)(j.b,{padding:2,children:Object(v.jsx)(j.c,{onClick:C,text:"Sign in with Google",color:"red",inline:!0})}),Object(v.jsx)(j.b,{padding:2,children:Object(v.jsx)(j.l,{children:"Don't have an account?"})}),Object(v.jsx)(j.b,{padding:2,children:Object(v.jsx)(d.a,{to:"signUp",className:"text-blue-500 hover:text-blue-600",children:"Sign up here"})}),Object(v.jsx)(j.b,{padding:2,children:Object(v.jsx)(d.a,{to:"passwordReset",className:"text-blue-500 hover:text-blue-600",children:"Forgot Password?"})})]})})})},Y=function(){var e=Object(c.useState)(""),t=Object(u.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)(""),a=Object(u.a)(i,2),l=a[0],b=a[1],p=Object(c.useState)(""),O=Object(u.a)(p,2),h=O[0],x=O[1],g=Object(c.useState)(null),f=Object(u.a)(g,2),m=f[0],w=f[1],y=function(){var e=Object(s.a)(Object(o.a)().mark((function e(t,n,c){var i,a;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.createUserWithEmailAndPassword(n,c);case 3:i=e.sent,a=i.user,R(a,{displayName:h}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),w("Error Signing up with email and password");case 11:r(""),b(""),x("");case 14:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n,c){return e.apply(this,arguments)}}();return Object(v.jsx)("div",{children:Object(v.jsx)(j.b,{padding:3,children:Object(v.jsxs)(j.e,{children:[Object(v.jsxs)(j.b,{padding:3,children:[null!==m&&Object(v.jsx)(j.n,{text:m}),Object(v.jsx)(j.f,{size:"md",children:"Sign up"})]}),Object(v.jsx)(j.b,{padding:2,children:Object(v.jsx)(j.m,{id:"displayName",onChange:function(e){return x(e.value)},placeholder:"Enter your name",label:"Name",value:h,type:"text"})}),Object(v.jsx)(j.b,{padding:2,children:Object(v.jsx)(j.m,{id:"email",onChange:function(e){return r(e.value)},placeholder:"Enter your email",label:"Email",value:n,type:"email"})}),Object(v.jsx)(j.b,{padding:2,children:Object(v.jsx)(j.m,{id:"password",onChange:function(e){return b(e.value)},placeholder:"Enter your password",label:"Password",value:l,type:"password"})}),Object(v.jsx)(j.b,{padding:2,children:Object(v.jsx)(j.c,{onClick:function(e){y(e,n,l),Object(d.c)("/")},text:"Sign up",color:"blue",inline:!0})}),Object(v.jsx)(j.b,{padding:2,children:Object(v.jsx)(j.l,{children:"or"})}),Object(v.jsx)(j.b,{padding:2,children:Object(v.jsx)(j.c,{onClick:C,text:"Sign in with Google",color:"red",inline:!0})}),Object(v.jsx)(j.b,{padding:2,children:Object(v.jsx)(j.l,{children:"Already have an account?"})}),Object(v.jsx)(j.b,{padding:2,children:Object(v.jsx)(d.a,{to:"/",className:"text-blue-500 hover:text-blue-600",children:"Sign in here"})})]})})})},M=n(22),X=n.n(M),_=(n(54),function(){var e=Object(c.useState)(null),t=Object(u.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)(null),a=Object(u.a)(i,2),b=a[0],p=a[1],O=Object(l.b)(),h=Object(l.c)(f),x=h.map((function(e){return{value:e.email,label:e.name}})),m=x.length>0?x[0].value:"",w=Object(c.useState)(m),y=Object(u.a)(w,2),A=y[0],k=y[1],S=Object(l.c)(I),D=S.uid,T=S.email,C=Object(c.useRef)(null),R=Object(c.useRef)(null);Object(c.useEffect)((function(){X()({path:"webviewer",disabledElements:["ribbons","toggleNotesButton","searchButton","menuButton"]},C.current).then((function(e){var t=e.iframeWindow;e.setToolbarGroup("toolbarGroup-View"),r(e);var n=t.document.body;n.addEventListener("dragover",U),n.addEventListener("drop",(function(t){P(t,e)})),R.current.onchange=function(t){var n=t.target.files[0];n&&e.loadDocument(n)}}))}),[]);var N=function(){var e=Object(s.a)(Object(o.a)().mark((function e(){var t,c,r,i,a,d,l;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.Annotations,c=n.docViewer,r=c.getAnnotationManager(),i=r.getFieldManager(),a=r.getAnnotationsList(),d=[],l=[],e.next=8,Promise.all(a.map(function(){var e=Object(s.a)(Object(o.a)().mark((function e(n,c){var a,s;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"===typeof n.custom){e.next=20;break}if("TEXT"!==n.custom.type){e.next=6;break}s=new t.Forms.Field(n.getContents()+Date.now()+c,{type:"Tx",value:n.custom.value}),a=new t.TextWidgetAnnotation(s),e.next=18;break;case 6:if("SIGNATURE"!==n.custom.type){e.next=11;break}s=new t.Forms.Field(n.getContents()+Date.now()+c,{type:"Sig"}),a=new t.SignatureWidgetAnnotation(s,{appearance:"_DEFAULT",appearances:{_DEFAULT:{Normal:{data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjEuMWMqnEsAAAANSURBVBhXY/j//z8DAAj8Av6IXwbgAAAAAElFTkSuQmCC",offset:{x:100,y:100}}}}}),e.next=18;break;case 11:if("DATE"!==n.custom.type){e.next=16;break}s=new t.Forms.Field(n.getContents()+Date.now()+c,{type:"Tx",value:"m-d-yyyy",actions:{F:[{name:"JavaScript",javascript:'AFDate_FormatEx("mmm d, yyyy");'}],K:[{name:"JavaScript",javascript:'AFDate_FormatEx("mmm d, yyyy");'}]}}),a=new t.DatePickerWidgetAnnotation(s),e.next=18;break;case 16:return r.deleteAnnotation(n,!1,!0),e.abrupt("return");case 18:e.next=21;break;case 20:return e.abrupt("return");case 21:a.PageNumber=n.getPageNumber(),a.X=n.getX(),a.Y=n.getY(),a.rotation=n.Rotation,0===n.Rotation||180===n.Rotation?(a.Width=n.getWidth(),a.Height=n.getHeight()):(a.Width=n.getHeight(),a.Height=n.getWidth()),d.push(n),t.WidgetAnnotation.getCustomStyles=function(e){if(e instanceof t.SignatureWidgetAnnotation)return{border:"1px solid #a5c7ff"}},t.WidgetAnnotation.getCustomStyles(a),r.addAnnotation(a),i.addField(s),l.push(a);case 32:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 8:return r.deleteAnnotations(d,null,!0),e.next=11,r.drawAnnotationsFromList(l);case 11:return e.next=13,B();case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=n.docViewer,a=n.Annotations,o=i.getAnnotationManager(),s=i.getDocument(),d=i.getDisplayModeManager().getDisplayMode(),l=d.getSelectedPages(t,t);if(!t.x||null!=l.first){var u=null!==l.first?l.first:i.getCurrentPage(),j=s.getPageInfo(u),b=d.windowToPage(t,u),p=i.getZoom(),O=new a.FreeTextAnnotation;O.PageNumber=u;var h=90*i.getCompleteRotation(u);O.Rotation=h,270===h||90===h?(O.Width=50/p,O.Height=250/p):(O.Width=250/p,O.Height=50/p),O.X=(b.x||j.width/2)-O.Width/2,O.Y=(b.y||j.height/2)-O.Height/2,O.setPadding(new a.Rect(0,0,0,0)),O.custom={type:e,value:c,flag:r,name:"".concat(A,"_").concat(e,"_")},O.setContents(O.custom.name),O.FontSize=20/p+"px",O.FillColor=new a.Color(211,211,211,.5),O.TextColor=new a.Color(0,165,228),O.StrokeThickness=1,O.StrokeColor=new a.Color(0,165,228),O.TextAlign="center",O.Author=o.getCurrentUser(),o.deselectAllAnnotations(),o.addAnnotation(O,!0),o.redrawAnnotation(O),o.selectAnnotation(O)}},B=function(){var e=Object(s.a)(Object(o.a)().mark((function e(){var t,c,r,i,a,s,l,u,j,b,p;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=E.ref(),c="docToSign/".concat(D).concat(Date.now(),".pdf"),r=t.child(c),i=n.docViewer,a=n.annotManager,s=i.getDocument(),e.next=7,a.exportAnnotations({widgets:!0,fields:!0});case 7:return l=e.sent,e.next=10,s.getFileData({xfdfString:l});case 10:return u=e.sent,j=new Uint8Array(u),b=new Blob([j],{type:"application/pdf"}),r.put(b).then((function(e){console.log("Uploaded the blob")})),p=h.map((function(e){return e.email})),e.next=17,F(D,T,c,p);case 17:O(g()),Object(d.c)("/");case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(e){return e.preventDefault(),!1},P=function(e,t){var n=t.docViewer.getScrollViewElement(),c=n.scrollLeft||0,r=n.scrollTop||0;return p({x:e.pageX+c,y:e.pageY+r}),e.preventDefault(),!1},W=function(e){e.target.style.opacity=.5;var t=e.target.cloneNode(!0);t.id="form-build-drag-image-copy",t.style.width="250px",document.body.appendChild(t),e.dataTransfer.setDragImage(t,125,25),e.dataTransfer.setData("text","")},V=function(e,t){L(t,b),e.target.style.opacity=1,document.body.removeChild(document.getElementById("form-build-drag-image-copy")),e.preventDefault()};return Object(v.jsxs)("div",{className:"prepareDocument",children:[Object(v.jsxs)(j.b,{display:"flex",direction:"row",flex:"grow",children:[Object(v.jsxs)(j.d,{span:2,children:[Object(v.jsx)(j.b,{padding:3,children:Object(v.jsx)(j.f,{size:"md",children:"Prepare Document"})}),Object(v.jsxs)(j.b,{padding:3,children:[Object(v.jsx)(j.g,{gap:1,children:Object(v.jsxs)(j.j,{children:[Object(v.jsx)(j.b,{padding:2,children:Object(v.jsx)(j.l,{children:"Step 1"})}),Object(v.jsx)(j.b,{padding:2,children:Object(v.jsx)(j.c,{onClick:function(){R&&R.current.click()},accessibilityLabel:"upload a document",text:"Upload a document",iconEnd:"add-circle"})})]})}),Object(v.jsx)(j.g,{children:Object(v.jsxs)(j.j,{children:[Object(v.jsx)(j.b,{padding:2,children:Object(v.jsx)(j.l,{children:"Step 2"})}),Object(v.jsx)(j.b,{padding:2,children:Object(v.jsx)(j.h,{id:"assigningFor",name:"assign",onChange:function(e){var t=e.value;return k(t)},options:x,placeholder:"Select recipient",label:"Adding signature for",value:A})}),Object(v.jsx)(j.b,{padding:2,children:Object(v.jsx)("div",{draggable:!0,onDragStart:function(e){return W(e)},onDragEnd:function(e){return V(e,"SIGNATURE")},children:Object(v.jsx)(j.c,{onClick:function(){return L("SIGNATURE")},accessibilityLabel:"add signature",text:"Add signature",iconEnd:"compose"})})}),Object(v.jsx)(j.b,{padding:2,children:Object(v.jsx)("div",{draggable:!0,onDragStart:function(e){return W(e)},onDragEnd:function(e){return V(e,"TEXT")},children:Object(v.jsx)(j.c,{onClick:function(){return L("TEXT")},accessibilityLabel:"add text",text:"Add text",iconEnd:"text-sentence-case"})})}),Object(v.jsx)(j.b,{padding:2,children:Object(v.jsx)("div",{draggable:!0,onDragStart:function(e){return W(e)},onDragEnd:function(e){return V(e,"DATE")},children:Object(v.jsx)(j.c,{onClick:function(){return L("DATE")},accessibilityLabel:"add date field",text:"Add date",iconEnd:"calendar"})})})]})}),Object(v.jsx)(j.g,{gap:1,children:Object(v.jsxs)(j.j,{children:[Object(v.jsx)(j.b,{padding:2,children:Object(v.jsx)(j.l,{children:"Step 3"})}),Object(v.jsx)(j.b,{padding:2,children:Object(v.jsx)(j.c,{onClick:N,accessibilityLabel:"Send for signing",text:"Send",iconEnd:"send"})})]})})]})]}),Object(v.jsx)(j.d,{span:10,children:Object(v.jsx)("div",{className:"webviewer",ref:C})})]}),Object(v.jsx)("input",{type:"file",ref:R,style:{display:"none"}})]})}),q=function(){return Object(v.jsxs)("div",{children:[Object(v.jsx)(G,{}),Object(v.jsx)(_,{})]})},J=Object(p.b)({name:"signDoc",initialState:{docToSign:null},reducers:{setDocToSign:function(e,t){e.docToSign=t.payload},resetDocToSign:function(e,t){e.docToSign=null}}}),Q=J.actions,K=Q.setDocToSign,Z=Q.resetDocToSign,$=function(e){return e.signDoc.docToSign},ee=J.reducer,te=(n(55),function(){var e=Object(c.useState)(null),t=Object(u.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)(0),a=Object(u.a)(i,2),b=a[0],p=a[1],O=Object(l.c)($),h=Object(l.c)(I),x=O.docRef,g=O.docId,f=h.email,m=Object(c.useRef)(null);Object(c.useEffect)((function(){X()({path:"webviewer",disabledElements:["ribbons","toggleNotesButton","searchButton","menuButton","rubberStampToolGroupButton","stampToolGroupButton","fileAttachmentToolGroupButton","calloutToolGroupButton","undo","redo","eraserToolButton"]},m.current).then(function(){var e=Object(s.a)(Object(o.a)().mark((function e(t){var n,c,i,a,s,d;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.docViewer,c=t.annotManager,i=t.Annotations,r(c),t.setToolbarGroup("toolbarGroup-Insert"),a=E.ref(),e.next=6,a.child(x).getDownloadURL();case 6:s=e.sent,n.loadDocument(s),d=function(e){return e instanceof i.TextWidgetAnnotation?{"background-color":"#a5c7ff",color:"white"}:e instanceof i.SignatureWidgetAnnotation?{border:"1px solid #a5c7ff"}:void 0},c.on("annotationChanged",(function(e,t,n){n.imported&&"add"===t&&e.forEach((function(e){e instanceof i.WidgetAnnotation&&(i.WidgetAnnotation.getCustomStyles=d,e.fieldName.startsWith(f)||(e.Hidden=!0,e.Listable=!1))}))}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[x,f]);var w=function(){var e=Object(s.a)(Object(o.a)().mark((function e(){var t;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.exportAnnotations({widgets:!1,links:!1});case 2:return t=e.sent,e.next=5,L(g,f,t);case 5:Object(d.c)("/");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(v.jsx)("div",{className:"prepareDocument",children:Object(v.jsxs)(j.b,{display:"flex",direction:"row",flex:"grow",children:[Object(v.jsxs)(j.d,{span:2,children:[Object(v.jsx)(j.b,{padding:3,children:Object(v.jsx)(j.f,{size:"md",children:"Sign Document"})}),Object(v.jsx)(j.b,{padding:3,children:Object(v.jsx)(j.g,{gap:1,children:Object(v.jsxs)(j.j,{children:[Object(v.jsx)(j.b,{padding:2,children:Object(v.jsx)(j.c,{onClick:function(){var e=n.getAnnotationsList();e[b]&&(n.jumpToAnnotation(e[b]),e[b+1]&&p(b+1))},accessibilityLabel:"next field",text:"Next field",iconEnd:"arrow-forward"})}),Object(v.jsx)(j.b,{padding:2,children:Object(v.jsx)(j.c,{onClick:function(){var e=n.getAnnotationsList();e[b]&&(n.jumpToAnnotation(e[b]),e[b-1]&&p(b-1))},accessibilityLabel:"Previous field",text:"Previous field",iconEnd:"arrow-back"})}),Object(v.jsx)(j.b,{padding:2,children:Object(v.jsx)(j.c,{onClick:w,accessibilityLabel:"complete signing",text:"Complete signing",iconEnd:"compose"})})]})})})]}),Object(v.jsx)(j.d,{span:10,children:Object(v.jsx)("div",{className:"webviewer",ref:m})})]})})}),ne=function(){return Object(v.jsxs)("div",{children:[Object(v.jsx)(G,{}),Object(v.jsx)(te,{})]})},ce=Object(p.b)({name:"viewDoc",initialState:{docToView:null},reducers:{setDocToView:function(e,t){e.docToView=t.payload},resetDocToView:function(e,t){e.docToView=null}}}),re=ce.actions,ie=re.setDocToView,ae=re.resetDocToView,oe=function(e){return e.viewDoc.docToView},se=ce.reducer,de=(n(56),function(){var e=Object(c.useState)(null),t=Object(u.a)(e,2),n=t[0],r=t[1],i=Object(l.c)(oe).docRef,a=Object(c.useRef)(null);Object(c.useEffect)((function(){X()({path:"webviewer",disabledElements:["ribbons","toggleNotesButton","contextMenuPopup"]},a.current).then(function(){var e=Object(s.a)(Object(o.a)().mark((function e(t){var n,c;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setToolbarGroup("toolbarGroup-View"),r(t),n=E.ref(),e.next=5,n.child(i).getDownloadURL();case 5:c=e.sent,console.log(c),t.docViewer.loadDocument(c);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[i]);var b=function(){var e=Object(s.a)(Object(o.a)().mark((function e(){return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(d.c)("/");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(v.jsx)("div",{className:"prepareDocument",children:Object(v.jsxs)(j.b,{display:"flex",direction:"row",flex:"grow",children:[Object(v.jsxs)(j.d,{span:2,children:[Object(v.jsx)(j.b,{padding:3,children:Object(v.jsx)(j.f,{size:"md",children:"View Document"})}),Object(v.jsx)(j.b,{padding:3,children:Object(v.jsx)(j.g,{gap:1,children:Object(v.jsxs)(j.j,{children:[Object(v.jsx)(j.b,{padding:2,children:Object(v.jsx)(j.c,{onClick:function(){n.downloadPdf(!0)},accessibilityLabel:"download signed document",text:"Download",iconEnd:"download"})}),Object(v.jsx)(j.b,{padding:2,children:Object(v.jsx)(j.c,{onClick:b,accessibilityLabel:"complete signing",text:"Done viewing",iconEnd:"check"})})]})})})]}),Object(v.jsx)(j.d,{span:10,children:Object(v.jsx)("div",{className:"webviewer",ref:a})})]})})}),le=function(){return Object(v.jsxs)("div",{children:[Object(v.jsx)(G,{}),Object(v.jsx)(de,{})]})},ue=function(){return Object(v.jsx)(j.b,{display:"flex",direction:"row",paddingY:2,color:"lightGray",children:Object(v.jsx)(j.d,{span:10,children:Object(v.jsx)(j.b,{padding:3,children:Object(v.jsx)(j.f,{size:"lg",children:"PDFTron Sign App"})})})})},je=function(){var e=Object(c.useState)(""),t=Object(u.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)(!1),a=Object(u.a)(i,2),o=a[0],s=a[1],l=Object(c.useState)(null),b=Object(u.a)(l,2),p=b[0],O=b[1];return Object(v.jsx)("div",{children:Object(v.jsx)(j.b,{padding:3,children:Object(v.jsxs)(j.e,{children:[Object(v.jsx)(j.b,{padding:3,children:Object(v.jsx)(j.f,{size:"md",children:"Reset your password"})}),null!==p&&Object(v.jsx)(j.n,{text:p}),!1!==o&&Object(v.jsx)(j.n,{text:"An email with reset info is on the way"}),Object(v.jsx)(j.b,{padding:2,children:Object(v.jsx)(j.m,{id:"email",onChange:function(e){return r(e.value)},placeholder:"Enter your email",label:"Email",value:n,type:"email"})}),Object(v.jsx)(j.b,{padding:2,children:Object(v.jsx)(j.c,{onClick:function(e){S.sendPasswordResetEmail(n).then((function(){s(!0),setTimeout((function(){s(!1)}),3e3)})).catch((function(){O("Error resetting password")})),Object(d.c)("/")},text:"Reset",color:"blue",inline:!0})}),Object(v.jsx)(j.b,{padding:2,children:Object(v.jsx)(d.a,{to:"/",className:"text-blue-500 hover:text-blue-600",children:"Back to the Sign in"})})]})})})},be=function(){var e=Object(l.c)(I).email,t=Object(c.useState)([]),n=Object(u.a)(t,2),r=n[0],i=n[1],a=Object(c.useState)(!0),b=Object(u.a)(a,2),p=b[0],O=b[1],h=Object(l.b)();return Object(c.useEffect)((function(){function t(){return(t=Object(s.a)(Object(o.a)().mark((function t(){var n;return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("email",e),t.next=3,B(e);case 3:n=t.sent,console.log(n),i(n),O(!1);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}setTimeout((function(){return t.apply(this,arguments)}),1e3)}),[e]),Object(v.jsx)("div",{children:p?Object(v.jsx)(j.i,{show:p,accessibilityLabel:"spinner"}):Object(v.jsx)("div",{children:r.length>0?Object(v.jsxs)(j.k,{children:[Object(v.jsx)(j.k.Header,{children:Object(v.jsxs)(j.k.Row,{children:[Object(v.jsx)(j.k.HeaderCell,{children:Object(v.jsx)(j.l,{weight:"bold",children:"From"})}),Object(v.jsx)(j.k.HeaderCell,{children:Object(v.jsx)(j.l,{weight:"bold",children:"When"})})]})}),Object(v.jsx)(j.k.Body,{children:r.map((function(e){return Object(v.jsxs)(j.k.Row,{children:[Object(v.jsx)(j.k.Cell,{children:Object(v.jsx)(j.l,{children:e.email})}),Object(v.jsx)(j.k.Cell,{children:Object(v.jsx)(j.l,{children:e.requestedTime?new Date(1e3*e.requestedTime.seconds).toDateString():""})}),Object(v.jsx)(j.k.Cell,{children:Object(v.jsx)(j.c,{onClick:function(t){var n=e.docRef,c=e.docId;h(K({docRef:n,docId:c})),Object(d.c)("/signDocument")},text:"Sign",color:"blue",inline:!0})})]},e.docRef)}))})]}):"You do not have any documents to sign"})})},pe=function(){var e=Object(l.c)(I).email,t=Object(c.useState)([]),n=Object(u.a)(t,2),r=n[0],i=n[1],a=Object(c.useState)(!0),b=Object(u.a)(a,2),p=b[0],O=b[1],h=Object(l.b)();return Object(c.useEffect)((function(){function t(){return(t=Object(s.a)(Object(o.a)().mark((function t(){var n;return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,U(e);case 2:n=t.sent,i(n),O(!1);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}setTimeout((function(){return t.apply(this,arguments)}),1e3)}),[e]),Object(v.jsx)("div",{children:p?Object(v.jsx)(j.i,{show:p,accessibilityLabel:"spinner"}):Object(v.jsx)("div",{children:r.length>0?Object(v.jsxs)(j.k,{children:[Object(v.jsx)(j.k.Header,{children:Object(v.jsxs)(j.k.Row,{children:[Object(v.jsx)(j.k.HeaderCell,{children:Object(v.jsx)(j.l,{weight:"bold",children:"From"})}),Object(v.jsx)(j.k.HeaderCell,{children:Object(v.jsx)(j.l,{weight:"bold",children:"When"})})]})}),Object(v.jsx)(j.k.Body,{children:r.map((function(e){return Object(v.jsxs)(j.k.Row,{children:[Object(v.jsx)(j.k.Cell,{children:e.emails.map((function(e){return Object(v.jsx)(j.l,{children:e},e)}))}),Object(v.jsx)(j.k.Cell,{children:Object(v.jsx)(j.l,{children:e.signedTime?new Date(1e3*e.signedTime.seconds).toDateString():""})}),Object(v.jsx)(j.k.Cell,{children:Object(v.jsx)(j.c,{onClick:function(t){var n=e.docRef,c=e.docId;h(ie({docRef:n,docId:c})),Object(d.c)("/viewDocument")},text:"View",color:"blue",inline:!0})})]},e.docRef)}))})]}):"You do not have any documents to review"})})},Oe=function(){var e=Object(l.b)();return Object(c.useEffect)((function(){e(ae()),e(Z())}),[e]),Object(v.jsxs)("div",{children:[Object(v.jsx)(G,{}),Object(v.jsxs)(j.e,{children:[Object(v.jsx)(j.b,{padding:3,children:Object(v.jsx)(j.f,{size:"md",children:"Sign Documents"})}),Object(v.jsx)(j.b,{padding:3,children:Object(v.jsx)(be,{})}),Object(v.jsx)(j.b,{padding:3,children:Object(v.jsx)(j.f,{size:"md",children:"Prepare Document"})}),Object(v.jsx)(j.b,{padding:2,children:Object(v.jsx)(j.c,{onClick:function(e){Object(d.c)("/assignUsers")},text:"Prepare Document for Signing",color:"blue",inline:!0})}),Object(v.jsx)(j.b,{padding:3,children:Object(v.jsx)(j.f,{size:"md",children:"Review Signed Documents"})}),Object(v.jsx)(j.b,{padding:3,children:Object(v.jsx)(pe,{})})]})]})},he=(n(57),function(){var e=Object(l.c)(I),t=Object(l.b)();return Object(c.useEffect)((function(){S.onAuthStateChanged(function(){var e=Object(s.a)(Object(o.a)().mark((function e(n){var c,r,i,a,s;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=6;break}return e.next=3,R(n);case 3:c=e.sent,r=c.uid,i=c.displayName,a=c.email,s=c.photoURL,t(W({uid:r,displayName:i,email:a,photoURL:s}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[t]),e?Object(v.jsx)("div",{children:Object(v.jsxs)(d.b,{children:[Object(v.jsx)(Oe,{path:"/"}),Object(v.jsx)(H,{path:"/assignUsers"}),Object(v.jsx)(q,{path:"/prepareDocument"}),Object(v.jsx)(ne,{path:"/signDocument"}),Object(v.jsx)(le,{path:"/viewDocument"})]})}):Object(v.jsxs)("div",{children:[Object(v.jsx)(ue,{}),Object(v.jsxs)(d.b,{children:[Object(v.jsx)(z,{path:"/"}),Object(v.jsx)(Y,{path:"signUp"}),Object(v.jsx)(je,{path:"passwordReset"})]})]})}),xe=Object(p.a)({reducer:{firebase:V,assign:m,signDoc:ee,viewDoc:se}});a.a.render(Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsx)(l.a,{store:xe,children:Object(v.jsx)(he,{})})}),document.getElementById("root"))}},[[58,1,2]]]);
//# sourceMappingURL=main.cc7b33d9.chunk.js.map